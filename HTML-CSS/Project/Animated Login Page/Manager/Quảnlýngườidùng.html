<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/Manager/manager.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Dashboard</title>
    <style>
        .content {
            margin-top: 20px;
            width:100%;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0px 4px 6px rgba(0,0,0,0.1);
            border-radius: 12px;
            overflow: hidden;
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #333;
            color: white;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
        .status.active {
            color: green;
            font-weight: bold;
        }
        .status.inactive {
            color: red;
            font-weight: bold;
        }
        button {
            background: #007bff;
            color: white;
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        .modal {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -20%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            z-index: 9999;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            width:400px;
            }
        .modal input {
            width: 100%;    
            margin: 8px 0;
            padding: 6px;
            }
        
        .overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 9998;
            }
        
    </style>
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <h2>Qu·∫£n l√Ω</h2>
        <ul>
            <li><a href="/Manager/manager.html"><i class="fas fa-home"></i> Doanh thu</a></li>
            <li>
                <a href=""><i class="fas fa-user-cog"></i> Tr√¨nh qu·∫£n l√Ω </a>
                <ul class="submenu">
                    <li><a href="/Manager/Qu·∫£nl√Ωng∆∞·ªùid√πng.html">üìÇ Qu·∫£n l√Ω t√†i kho·∫£n</a></li>
                    <li><a href="/Manager/Ph√¢nquy·ªÅnng∆∞·ªùid√πng.html">üìã Ph√¢n quy·ªÅn ng∆∞·ªùi d√πng</a></li>
                </ul>
            </li>
            <li><a href="#"><i class="fas fa-file-invoice"></i> ƒê∆°n thanh to√°n</a>
                <ul class="submenu">
                    <li><a href="/Manager/Qu·∫£nl√Ωƒë∆°nh√†ng.html">üõí Qu·∫£n l√Ω ƒë∆°n h√†ng</a></li>
                    <li><a href="/Manager/thanhto√°nho√†nti·ªÅn.html">üí≥ Thanh to√°n & Ho√†n ti·ªÅn </a></li>
                </ul></li>
            <li><a href="#"><i class="fas fa-box"></i> Kho h√†ng</a><ul class="submenu">
                <li><a href="/Manager/Kho.html">üìä T·ªìn kho & Nh·∫≠p xu·∫•t h√†ng</a></li>
                <li><a href="/Manager/Qu·∫£nl√Ωnh√†cungc·∫•p.html">üöö Qu·∫£n l√Ω nh√† cung c·∫•p</a></li>
            </ul></li>
            <li><a href="#"><i class="fas fa-users"></i> Ng∆∞·ªùi d√πng</a><ul class="submenu">
                <li><a href="/Manager/User.html">üí¨ H·ªó tr·ª£ kh√°ch h√†ng</a></li>
            </ul></li>
            <li><a href="#"><i class="fas fa-cogs"></i> C√†i ƒë·∫∑t</a><ul class="submenu">
                <li><a href="/Manager/setting.html">‚öôÔ∏è C√†i ƒë·∫∑t chung</a></li>
                <li><a href="/Manager/Ch√≠nhs√°chv√†b·∫£om·∫≠t.html">üîíCh√≠nh s√°ch b·∫£o m·∫≠t & Quy·ªÅn ri√™ng t∆∞</a></li>
            </ul></li>
            <li id="logout"><a href="/login/index.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>
<div class="main-content">
    <div class="header">
        <div class="search">
            <input type="text" class="search-bar" placeholder="T√¨m ki·∫øm...">
        </div>
        <div class="bingbong">
            <div class="notification-icon">üîî</div>
            <div class="notifications">
                <p>üõí Kh√°ch h√†ng A v·ª´a mua 2 s·∫£n ph·∫©m</p>
                <p>üõçÔ∏è Kh√°ch h√†ng B ƒë√£ ho√†n th√†nh ƒë∆°n h√†ng</p>
                <p>üí≥ Kh√°ch h√†ng C v·ª´a thanh to√°n ƒë∆°n h√†ng</p>
                <p>üì¶ Kh√°ch h√†ng D ƒë√£ nh·∫≠n h√†ng</p>
                <p>üîÑ Kh√°ch h√†ng E y√™u c·∫ßu ƒë·ªïi h√†ng</p>
                <p>üì¢ Kh√°ch h√†ng F ƒë·ªÉ l·∫°i ƒë√°nh gi√° 5 sao</p>
                <p>üéâ Kh√°ch h√†ng G ƒëƒÉng k√Ω th√†nh vi√™n VIP</p>
            </div>
        </div>
        <div class="avatar">
            <img src="/login/OIP.jpg" alt="Avatar">
            <div class="dropdown">
                <p>Th√¥ng tin t√†i kho·∫£n</p>
                <p>Ghi ch√∫</p>
            </div>
        </div>
        <div class="logo">
            <img src="/main/Logo_DutchLady_1.png" alt="Logo">
        </div>
    </div>
<!-- User Management Page -->
<div class="content">
    <nav>
        <h2>Qu·∫£n l√Ω Ng∆∞·ªùi d√πng</h2>
    </nav>
    <main>
        <!-- üëá N√∫t Th√™m ng∆∞·ªùi d√πng ƒë∆∞·ª£c ch√®n t·∫°i ƒë√¢y -->
        <button onclick="openAddModal()" style="margin-bottom:20px;border:1px solid red;">Th√™m ng∆∞·ªùi d√πng</button>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>T√™n</th>
                    <th>Tu·ªïi</th>
                    <th>ƒê·ªãa ch·ªâ</th>
                    <th>S·ªë ƒëi·ªán tho·∫°i</th>
                    <th>Email</th>
                    <th>Tr·∫°ng th√°i</th>
                    <th>Danh hi·ªáu</th>
                    <th>H√†nh ƒë·ªông</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Nguy·ªÖn VƒÉn A</td>
                    <td>30</td>
                    <td>123 L√™ L·ª£i, Q.1, TP.HCM</td>
                    <td>0901234567</td>
                    <td>vana@example.com</td>
                    <td><span class="status active">Ho·∫°t ƒë·ªông</span></td>
                    <td>Kh√°ch h√†ng th√¢n thi·∫øt</td>
                    <td><button>Ch·ªânh s·ª≠a</button></td>
                </tr>
            </tbody>
        </table>

        <!-- Modal th√™m/ch·ªânh s·ª≠a -->
        <div class="modal" id="addModal" style="display:none;">
            <h3>Th√™m ng∆∞·ªùi d√πng</h3>
            <input type="text" id="editName" placeholder="T√™n">
            <input type="number" id="editAge" placeholder="Tu·ªïi">
            <input type="text" id="editAddress" placeholder="ƒê·ªãa ch·ªâ">
            <input type="text" id="editPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
            <input type="email" id="editEmail" placeholder="Email">
            <input type="text" id="editStatus" placeholder="Tr·∫°ng th√°i (Ho·∫°t ƒë·ªông/Ng·ª´ng ho·∫°t ƒë·ªông)">
            <input type="text" id="editRank" placeholder="Danh hi·ªáu">
            <button onclick="addUser()">Th√™m</button>
            <button onclick="closeModal()">H·ªßy</button>
        </div>

        <div class="modal" id="editModal" style="display:none;">
            <h3>Ch·ªânh s·ª≠a th√¥ng tin kh√°ch h√†ng</h3>
            <input type="text" id="editName" placeholder="T√™n">
            <input type="number" id="editAge" placeholder="Tu·ªïi">
            <input type="text" id="editAddress" placeholder="ƒê·ªãa ch·ªâ">
            <input type="text" id="editPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
            <input type="email" id="editEmail" placeholder="Email">
            <input type="text" id="editStatus" placeholder="Tr·∫°ng th√°i (Ho·∫°t ƒë·ªông/Ng·ª´ng ho·∫°t ƒë·ªông)">
            <input type="text" id="editRank" placeholder="Danh hi·ªáu">
            <button onclick="saveChanges()">L∆∞u</button>
            <button onclick="closeModal()">H·ªßy</button>
        </div>

        <div class="overlay" id="overlay" style="display:none;"></div>
    </main>
</div>
<script>
        let currentRow = null;
        let nextId = 2; // Gi·∫£ ƒë·ªãnh ID b·∫Øt ƒë·∫ßu t·ª´ 2
    
        // G·∫Øn s·ª± ki·ªán cho c√°c n√∫t ch·ªânh s·ª≠a sau khi DOM ƒë√£ s·∫µn s√†ng
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll("tbody tr").forEach(row => setupRow(row));
        });
    
        function setupRow(row) {
            const editBtn = row.querySelector("button");
            const deleteBtn = document.createElement("button");
            deleteBtn.textContent = "Xo√°";
            deleteBtn.style.background = "#dc3545";
            deleteBtn.style.marginLeft = "8px";
            deleteBtn.onclick = function () {
                if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën xo√° ng∆∞·ªùi d√πng n√†y?")) {
                    row.remove();
                }
            };
            editBtn.parentNode.appendChild(deleteBtn);
    
            editBtn.onclick = function () {
                currentRow = row;
                const cells = row.querySelectorAll("td");
    
                document.getElementById("editName").value = cells[1].innerText;
                document.getElementById("editAge").value = cells[2].innerText;
                document.getElementById("editAddress").value = cells[3].innerText;
                document.getElementById("editPhone").value = cells[4].innerText;
                document.getElementById("editEmail").value = cells[5].innerText;
                document.getElementById("editStatus").value = cells[6].innerText;
                document.getElementById("editRank").value = cells[7].innerText;
    
                document.getElementById("overlay").style.display = "block";
                document.getElementById("editModal").style.display = "block";
            };
        }
    
        function closeModal() {
            document.getElementById("editModal").style.display = "none";
            document.getElementById("addModal").style.display = "none";
            document.getElementById("overlay").style.display = "none";
        }
    
        function openAddModal() {
            currentRow = null;
            document.getElementById("editName").value = "";
            document.getElementById("editAge").value = "";
            document.getElementById("editAddress").value = "";
            document.getElementById("editPhone").value = "";
            document.getElementById("editEmail").value = "";
            document.getElementById("editStatus").value = "";
            document.getElementById("editRank").value = "";
    
            document.getElementById("overlay").style.display = "block";
            document.getElementById("addModal").style.display = "block";
        }
    
        function saveChanges() {
            const cells = currentRow.querySelectorAll("td");
    
            cells[1].innerText = document.getElementById("editName").value;
            cells[2].innerText = document.getElementById("editAge").value;
            cells[3].innerText = document.getElementById("editAddress").value;
            cells[4].innerText = document.getElementById("editPhone").value;
            cells[5].innerText = document.getElementById("editEmail").value;
    
            const status = document.getElementById("editStatus").value;
            cells[6].innerHTML = `<span class="status ${status.toLowerCase().includes('ng·ª´ng') ? 'inactive' : 'active'}">${status}</span>`;
            
            cells[7].innerText = document.getElementById("editRank").value;
    
            closeModal();
        }
    
        function addUser() {
            const name = document.getElementById("editName").value;
            const age = document.getElementById("editAge").value;
            const address = document.getElementById("editAddress").value;
            const phone = document.getElementById("editPhone").value;
            const email = document.getElementById("editEmail").value;
            const status = document.getElementById("editStatus").value;
            const rank = document.getElementById("editRank").value;
    
            const tbody = document.querySelector("tbody");
            const newRow = document.createElement("tr");
            newRow.innerHTML = `
                <td>${nextId++}</td>
                <td>${name}</td>
                <td>${age}</td>
                <td>${address}</td>
                <td>${phone}</td>
                <td>${email}</td>
                <td><span class="status ${status.toLowerCase().includes('ng·ª´ng') ? 'inactive' : 'active'}">${status}</span></td>
                <td>${rank}</td>
                <td><button>Ch·ªânh s·ª≠a</button></td>
            `;
            tbody.appendChild(newRow);
            setupRow(newRow); // G·∫Øn s·ª± ki·ªán cho n√∫t m·ªõi
            closeModal();
        }
    </script>
    

    </main>
</div>